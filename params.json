{
  "name": "Minke",
  "tagline": "Suite of rake tasks for building microservices in Go with Docker",
  "body": "# Minke\r\n\r\n[![Join the chat at https://gitter.im/nicholasjackson/minke](https://badges.gitter.im/nicholasjackson/minke.svg)](https://gitter.im/nicholasjackson/minke?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)\r\n\r\n## NOTE:\r\nVersion 1 is pretty much a complete rewrite which supports new generator plugins to scaffold applications and greater compatibility for running docker compose on CI environments.  Documentation is coming soon (as in hopefully tomorrow), but for the moment I apologize but the documentation below is a little out of date.\r\n\r\nVersion 1.0 is not compatible with previous versions of minke however upgrading is not so painful, full instructions will be updated shortly.   In the mean time please continue to use the previous stable 0.1.5 [https://github.com/nicholasjackson/minke/tree/0.1.5](https://github.com/nicholasjackson/minke/tree/0.1.5).\r\n\r\n**Version 1.0.1**  \r\n[![Build Status](https://travis-ci.org/nicholasjackson/minke.svg?branch=master)](https://travis-ci.org/nicholasjackson/minke)  \r\n\r\n[![Code Climate](https://codeclimate.com/github/nicholasjackson/minke/badges/gpa.svg)](https://codeclimate.com/github/nicholasjackson/minke)  \r\n\r\n[![Test Coverage](https://codeclimate.com/github/nicholasjackson/minke/badges/coverage.svg)](https://codeclimate.com/github/nicholasjackson/minke/coverage)  \r\n\r\n[![Issue Count](https://codeclimate.com/github/nicholasjackson/minke/badges/issue_count.svg)](https://codeclimate.com/github/nicholasjackson/minke)\r\n\r\nMinke is an opinionated build system for Microservices and Docker, like a little envelope of quality it scaffolds the build, run and test (unit test and functional tests) phases of your microservice project allowing you to simply run and test your images using Docker Compose.  Currently supporting Google's Go, and experimental support for Swift, extensions are planned for Node.js or HTML / Javascript sites with Grunt or Gulp based builds.\r\n\r\n## Generators\r\n- Go - [Go Microservice Template](https://github.com/nicholasjackson/minke-generator-go)\r\n- .NET Core - [.NET MVC Microservice Template](https://github.com/nicholasjackson/minke-generator-netmvc)\r\n- Java - Spring Boot\r\n- Swift - Kitura (Coming Soon)\r\n- Node - ExpressJS (Coming Soon)\r\n- Ruby - Rails (Coming Soon)\r\n\r\n## Installation\r\n\r\nAdd this line to your application's Gemfile:\r\n\r\n```ruby\r\ngem 'minke'\r\n```\r\n\r\nAnd then execute:\r\n\r\n    $ bundle\r\n\r\nOr install it yourself as:\r\n\r\n    $ gem install minke\r\n\r\n## Dependencies\r\n\r\n### Docker\r\nYou need to have docker, docker-machine, and docker-compose installed on your build machine and the docker environment variables must be set.  If using the docker-toolkit on a mac you can set these by running...\r\n```bash\r\neval \"$(docker-machine env default)\"\r\n```\r\n\r\n## Not for Docker for Mac Beta users\r\nIf you use docker for mac please set the environment variable, this will auto resolve once Docker for mac exits beta.\r\n```\r\nDOCKER_IP=[your docker vm ip]\r\n```\r\n\r\n## Usage\r\nInclude the rake tasks in your Rakefile\r\n```ruby\r\nrequire 'minke'\r\n\r\nspec = Gem::Specification.find_by_name 'minke'\r\nRake.add_rakelib \"#{spec.gem_dir}/lib/minke/rake\"\r\n```\r\n\r\nBy default Go builder looks for a config file (config.yml) in the same folder as your Rakefile\r\n\r\nGo builder provides the following tasks...\r\n\r\n### rake app:test\r\nGets your packages dependencies then executes go test against the package.\r\n\r\n### rake app:build\r\nCreates a linux binary for your application, runs app:test before execution.\r\n\r\n### rake app:build_server\r\nCreates a docker image for your application, runs app:build before execution.\r\n\r\n### rake app:build_and_run\r\nCreates a docker image for your application then starts the application using docker-compose, runs app:build_server before execution.\r\n\r\n### rake app:cucumber[optional feature tag]\r\nStarts the application and then runs cucumber to execute your features, you can optionally pass a feature tag to this command to configure which part of your test suite you would like to run.  Does not build the server before running, this needs to be done when you change your source code with app:build_server.\r\n\r\n### rake app:push\r\nPushes the built image to the configured registry, does not build the image before execution, this can be done manually with app:build_server.\r\n\r\n## Config File\r\nThe config file config.yml is where you set the various configuration for the build process.\r\n\r\n### Example Config File\r\n```yaml\r\nnamespace: 'github.com/nicholasjackson'\r\napplication_name: 'event-sauce'\r\nlanguage: go\r\ndocker_registry:\r\n  url: <%= ENV['DOCKER_REGISTRY_URL'] %>\r\n  user: <%= ENV['DOCKER_REGISTRY_USER'] %>\r\n  password: <%= ENV['DOCKER_REGISTRY_PASS'] %>\r\n  email: <%= ENV['DOCKER_REGISTRY_EMAIL'] %>\r\n  namespace: <%= ENV['DOCKER_NAMESPACE'] %>\r\ndocker:\r\n  docker_file: './dockerfiles/event-sauce/Dockerfile'\r\n  compose_file: './dockercompose/event-sauce/docker-compose.yml'\r\n  build:\r\n    image: [optional]\r\n    docker_file: [optional]\r\nafter_build:\r\n  copy_assets:\r\n    -\r\n      from: <%= \"#{ENV['GOPATH']}/src/github.com/nicholasjackson/event-sauce/event-sauce\" %>\r\n      to: './docker/event-sauce'\r\n    -\r\n      from: './swagger_spec/swagger.yml'\r\n      to: './dockerfile/event-sauce/swagger_spec/swagger.yml'\r\nrun:\r\n  consul_loader:\r\n    enabled: true\r\n    config_file: './config.yml'\r\n    url: <%= \"http://#{ENV['DOCKER_IP']}:9500\" %>\r\n  docker:\r\n    compose_file: './dockercompose/event-sauce/docker-compose-alternate.yml'\r\ncucumber:\r\n  consul_loader:\r\n    enabled: true\r\n    config_file: './config.yml'\r\n    url: <%= \"http://#{ENV['DOCKER_IP']}:9500\" %>\r\n  health_check:\r\n    enabled: true\r\n    url: <%= \"http://#{ENV['DOCKER_IP']}:8001/v1/health\" %>\r\n  after_start:\r\n    - 'wait_for_elastic_search'\r\n```\r\n\r\n#### head:\r\nThis section contains the configuration for the build process.  \r\n**namespace:** namespace for your application code within your GOPATH, this is generally the same as your repository.  \r\n**application_name:** name of the built binary.  \r\n**language** (go|swift) language type of the build swift is currently experimental and uses the v3 dev branch which is compatible with Kitura\r\n\r\n#### docker_registry:\r\nThis section contains the configuration for the docker registry to push the image to.  Images are pushed to the registry prefixed with the namespace and application_name, e.g. nicholasjackson/event-sauce:latest.   \r\n**url:** url for the docker registry.  \r\n**user:** username to use when logging into the registry.  \r\n**password:** password to use when logging into the registry.  \r\n**email:** email address to use when logging into the registry.  \r\n**namespace:** namespace of your image to use when pushing the image to the registry.  \r\n\r\n#### after_build:\r\nThis section allows you to copy assets such as binaries or files which you would like to include into your Docker image.\r\n##### copy_assets:  \r\nAn array of elements with the following parameters:  \r\n**from:** the source file or directory  \r\n**to:** the destination file or directory\r\n\r\n#### docker:\r\nThis section contains configuration for the Docker build and run process.  \r\n**docker_file:** path to the folder containing your Dockerfile used by the build_server task.  \r\n**compose_file:** path to your docker-compose file for run and cucumber tasks.\r\n**build:** This section allows you to override the language default used for building your application code.\r\n- **image [optional]:** specify a different image from your registry or local machine to use for building the application.\r\n- **docker_file [optional]:** specify a dockerfile which will be built into an image and then used for building the application.\r\n\r\n#### run:\r\nThe run section defines config for running your microservice with Docker Compose.\r\n##### consul_loader:\r\nWhen the application is run using docker-compose you can load some default config into your consul server.  Told you this was opinionated, if you are building microservices you are using consul right?  \r\n**enabled:** boolean determining if this feature is enabled.  \r\n**config_file:** path to a yaml file containing the key values you would like to load into consul. consul_loader flattens the structure of your yaml file and converts this into key values. For more information please see []()\r\n##### docker:\r\nThis section allows you to override the docker compose file specified in the main section incase you would like a different config for testing.  \r\n**compose_file:** path to your docker-compose file for run and cucumber tasks.\r\n##### after_start:\r\nThis section is an array of rake tasks which will be run after docker compose has started, you can define these rake tasks in your main Rakefile.  e.g.  \r\n  - 'wait_for_elastic_search'\r\n  - 'es:create_indexes'\r\n\r\n#### cucumber:\r\nThe cucumber section defines config for running and testing your microservice with Docker Compose and cucumber, the config options are the same as in **run:** with the addition of health_check.\r\n##### health_check:\r\nAfter the Docker Compose startup the application can wait until the main application has started before running the cucumber tests, to enable this specify true for the enabled: section then specify your health check url.  \r\n**enabled** (true|false) enable or disable the health check.  \r\n**url** url to use for health checks.  \r\n\r\n## Development\r\n\r\nAfter checking out the repo, run `bin/setup` to install dependencies. Then, run `rake rspec` to run the tests. You can also run `bin/console` for an interactive prompt that will allow you to experiment.\r\n\r\nTo install this gem onto your local machine, run `bundle exec rake install`. To release a new version, update the version number in `version.rb`, and then run `bundle exec rake release`, which will create a git tag for the version, push git commits and tags, and push the `.gem` file to [rubygems.org](https://rubygems.org).\r\n\r\n## Contributing\r\n\r\nBug reports and pull requests are welcome on GitHub at https://github.com/[USERNAME]/go_builder. This project is intended to be a safe, welcoming space for collaboration, and contributors are expected to adhere to the [Contributor Covenant](contributor-covenant.org) code of conduct.\r\n\r\n\r\n## License\r\n\r\nThe gem is available as open source under the terms of the [MIT License](http://opensource.org/licenses/MIT).\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}